float tmp1 = shellExpScaleMinV * vtx.y;
float tmp2 = shellExpScaleMaxV * vtx.y;
float tmp3 = -tmp1;
float tmp4 = tmp2 + tmp3;
float tmp5 = shellExpScaleMinV + tmp4;
float tmp6 = M_PI * vtx.x;
float tmp7 = 2. * tmp6;
float tmp8 = shellPerturbPeriodU * tmp6;
float tmp9 = 2. * tmp8;
float tmp10 = cos(tmp7);
float tmp11 = cos(tmp9);
float tmp12 = tmp10 * tmp11;
float tmp13 = M_PI * vtx.y;
float tmp14 = shellPerturbPeriodV * tmp13;
float tmp15 = 2. * tmp14;
float tmp16 = cos(tmp15);
float tmp17 = tmp10 * tmp16;
float tmp18 = exp(tmp5);
float tmp19 = shellPeriodV * tmp13;
float tmp20 = 2. * tmp19;
float tmp21 = cos(tmp20);
float tmp22 = sin(tmp20);
float tmp23 = sin(tmp7);
float tmp24 = tmp11 * tmp23;
float tmp25 = tmp21 * tmp24;
float tmp26 = tmp16 * tmp23;
float tmp27 = tmp21 * tmp26;
float tmp28 = tmp21 * tmp23;
float tmp29 = tmp22 * tmp23;
float tmp30 = tmp11 * tmp29;
float tmp31 = tmp16 * tmp29;
float tmp32 = 2. * tmp5;
float tmp33 = M_PI * tmp10;
float tmp34 = M_PI * M_PI;
float tmp35 = tmp10 * tmp23;
float tmp36 = sin(tmp9);
float tmp37 = tmp10 * tmp10;
float tmp38 = tmp11 * tmp36;
float tmp39 = shellPerturbAmplU * shellPerturbAmplU;
float tmp40 = tmp11 * tmp11;
float tmp41 = tmp16 * tmp16;
float tmp42 = shellPerturbAmplV * shellPerturbAmplV;
float tmp43 = M_PI * tmp12;
float tmp44 = shellPerturbAmplU * tmp43;
float tmp45 = M_PI * tmp17;
float tmp46 = shellPerturbAmplV * tmp45;
float tmp47 = tmp23 * tmp36;
float tmp48 = M_PI * tmp47;
float tmp49 = shellPerturbPeriodU * tmp48;
float tmp50 = shellPerturbAmplU * tmp49;
float tmp51 = tmp16 * tmp36;
float tmp52 = exp(tmp32);
float tmp53 = M_PI * tmp22;
float tmp54 = tmp22 * tmp40;
float tmp55 = tmp39 * tmp54;
float tmp56 = M_PI * tmp55;
float tmp57 = tmp22 * tmp41;
float tmp58 = tmp42 * tmp57;
float tmp59 = M_PI * tmp58;
float tmp60 = tmp21 * tmp40;
float tmp61 = tmp21 * tmp41;
float tmp62 = tmp10 * tmp22;
float tmp63 = M_PI * tmp62;
float tmp64 = M_PI * tmp29;
float tmp65 = shellExpScaleMaxV * tmp64;
float tmp66 = M_PI * tmp28;
float tmp67 = shellExpScaleMaxV * tmp66;
float tmp68 = tmp28 * tmp34;
float tmp69 = shellPeriodV * tmp68;
float tmp70 = tmp29 * tmp34;
float tmp71 = shellPeriodV * tmp70;
float tmp72 = tmp11 * tmp22;
float tmp73 = M_PI * tmp72;
float tmp74 = shellPerturbAmplU * tmp73;
float tmp75 = tmp16 * tmp22;
float tmp76 = M_PI * tmp75;
float tmp77 = shellPerturbAmplV * tmp76;
float tmp78 = tmp11 * tmp21;
float tmp79 = tmp16 * tmp21;
float tmp80 = sin(tmp15);
float tmp81 = tmp22 * tmp80;
float tmp82 = shellExpScaleMinV * tmp64;
float tmp83 = shellExpScaleMinV * tmp66;
float tmp84 = tmp22 * tmp24;
float tmp85 = M_PI * tmp84;
float tmp86 = shellPerturbAmplU * tmp85;
float tmp87 = shellExpScaleMaxV * tmp86;
float tmp88 = tmp22 * tmp26;
float tmp89 = M_PI * tmp88;
float tmp90 = shellPerturbAmplV * tmp89;
float tmp91 = shellExpScaleMaxV * tmp90;
float tmp92 = tmp23 * tmp78;
float tmp93 = M_PI * tmp92;
float tmp94 = shellPerturbAmplU * tmp93;
float tmp95 = tmp23 * tmp79;
float tmp96 = M_PI * tmp95;
float tmp97 = shellPerturbAmplV * tmp96;
float tmp98 = tmp25 * tmp34;
float tmp99 = shellPerturbAmplU * tmp98;
float tmp100 = shellPeriodV * tmp99;
float tmp101 = tmp27 * tmp34;
float tmp102 = shellPerturbAmplV * tmp101;
float tmp103 = shellPeriodV * tmp102;
float tmp104 = tmp30 * tmp34;
float tmp105 = shellPerturbAmplU * tmp104;
float tmp106 = shellPeriodV * tmp105;
float tmp107 = tmp31 * tmp34;
float tmp108 = shellPerturbAmplV * tmp107;
float tmp109 = shellPeriodV * tmp108;
float tmp110 = tmp11 * tmp75;
float tmp111 = M_PI * tmp110;
float tmp112 = shellPerturbAmplV * tmp111;
float tmp113 = shellPerturbAmplU * tmp112;
float tmp114 = tmp11 * tmp16;
float tmp115 = tmp21 * tmp114;
float tmp116 = M_PI * tmp30;
float tmp117 = shellPerturbAmplU * tmp116;
float tmp118 = shellExpScaleMinV * tmp117;
float tmp119 = M_PI * tmp31;
float tmp120 = shellPerturbAmplV * tmp119;
float tmp121 = shellExpScaleMinV * tmp120;
float tmp122 = M_PI * tmp25;
float tmp123 = shellPerturbAmplU * tmp122;
float tmp124 = M_PI * tmp27;
float tmp125 = shellPerturbAmplV * tmp124;
float tmp126 = tmp22 * tmp36;
float tmp127 = tmp10 * tmp126;
float tmp128 = M_PI * tmp127;
float tmp129 = shellPerturbPeriodU * tmp128;
float tmp130 = shellPerturbAmplU * tmp129;
float tmp131 = shellExpScaleMaxV * tmp130;
float tmp132 = tmp21 * tmp36;
float tmp133 = tmp10 * tmp132;
float tmp134 = M_PI * tmp133;
float tmp135 = shellPerturbPeriodU * tmp134;
float tmp136 = shellPerturbAmplU * tmp135;
float tmp137 = tmp10 * tmp36;
float tmp138 = tmp21 * tmp137;
float tmp139 = tmp34 * tmp138;
float tmp140 = shellPerturbPeriodU * tmp139;
float tmp141 = shellPerturbAmplU * tmp140;
float tmp142 = shellPeriodV * tmp141;
float tmp143 = tmp22 * tmp137;
float tmp144 = tmp34 * tmp143;
float tmp145 = shellPerturbPeriodU * tmp144;
float tmp146 = shellPerturbAmplU * tmp145;
float tmp147 = shellPeriodV * tmp146;
float tmp148 = M_PI * tmp143;
float tmp149 = shellPerturbPeriodU * tmp148;
float tmp150 = shellPerturbAmplU * tmp149;
float tmp151 = shellExpScaleMinV * tmp150;
float tmp152 = M_PI * tmp138;
float tmp153 = shellPerturbPeriodU * tmp152;
float tmp154 = shellPerturbAmplU * tmp153;
float tmp155 = M_PI * tmp21;
float tmp156 = tmp39 * tmp60;
float tmp157 = M_PI * tmp156;
float tmp158 = tmp42 * tmp61;
float tmp159 = M_PI * tmp158;
float tmp160 = tmp10 * tmp21;
float tmp161 = M_PI * tmp160;
float tmp162 = M_PI * tmp78;
float tmp163 = shellPerturbAmplU * tmp162;
float tmp164 = M_PI * tmp79;
float tmp165 = shellPerturbAmplV * tmp164;
float tmp166 = M_PI * tmp115;
float tmp167 = shellPerturbAmplV * tmp166;
float tmp168 = shellPerturbAmplU * tmp167;
float tmp169 = tmp10 * tmp47;
float tmp170 = tmp22 * tmp169;
pos.x = (circleOfsX + shellPerturbAmplV * tmp17 + shellPerturbAmplU * tmp12 + tmp10) * tmp18;
pos.y = (shellPerturbAmplV * tmp27 + shellPerturbAmplU * tmp25 + tmp28 + -circleOfsZ * tmp22 + circleOfsY * tmp21) * tmp18;
pos.z = (shellPerturbAmplV * tmp31 + shellPerturbAmplU * tmp30 + tmp29 + circleOfsZ * tmp21 + circleOfsY * tmp22) * tmp18;
normal.x = 2. * (4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp10 * tmp24 * tmp16 * tmp34 + -circleOfsZ * shellExpScaleMaxV * tmp50 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodU * tmp37 * tmp51 * tmp34 + -2. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodU * tmp34 * tmp51 + -2. * circleOfsY * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp34 * tmp47 + circleOfsZ * shellExpScaleMinV * tmp50 + -circleOfsZ * shellExpScaleMinV * tmp46 + -circleOfsZ * shellExpScaleMinV * tmp44 + 2. * shellPeriodV * shellPerturbPeriodU * tmp37 * tmp38 * tmp34 * tmp39 + 4. * shellPeriodV * shellPerturbAmplV * tmp17 * tmp23 * tmp34 + 4. * shellPeriodV * shellPerturbAmplU * tmp12 * tmp23 * tmp34 + 2. * circleOfsY * shellPeriodV * shellPerturbAmplV * tmp17 * tmp34 + 2. * circleOfsY * shellPeriodV * shellPerturbAmplU * tmp12 * tmp34 + circleOfsZ * shellExpScaleMaxV * tmp46 + circleOfsZ * shellExpScaleMaxV * tmp44 + 2. * shellPeriodV * tmp35 * tmp41 * tmp34 * tmp42 + 2. * shellPeriodV * tmp35 * tmp40 * tmp34 * tmp39 + -2. * shellPeriodV * shellPerturbPeriodU * tmp34 * tmp38 * tmp39 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp36 * tmp37 * tmp34 + -2. * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp34 * tmp36 + -circleOfsZ * shellExpScaleMinV * tmp33 + 2. * shellPeriodV * tmp34 * tmp35 + 2. * circleOfsY * shellPeriodV * tmp10 * tmp34 + circleOfsZ * shellExpScaleMaxV * tmp33) * tmp52;
normal.y = 2. * (2. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodU * tmp21 * tmp35 * tmp36 * tmp16 * tmp34 + -circleOfsZ * shellExpScaleMinV * tmp154 + -circleOfsY * tmp151 + -circleOfsX * shellExpScaleMaxV * shellPerturbAmplU * shellPerturbPeriodU * M_PI * tmp22 * tmp47 + 2. * shellPeriodV * shellPerturbPeriodU * tmp10 * tmp38 * tmp23 * tmp21 * tmp34 * tmp39 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp23 * tmp133 * tmp34 + -2. * circleOfsZ * tmp147 + 2. * circleOfsY * tmp142 + circleOfsZ * shellExpScaleMaxV * tmp136 + circleOfsY * tmp131 + circleOfsX * shellExpScaleMinV * shellPerturbAmplU * shellPerturbPeriodU * M_PI * tmp23 * tmp126 + -circleOfsZ * shellExpScaleMinV * tmp125 + -circleOfsZ * shellExpScaleMinV * tmp123 + -circleOfsY * tmp121 + -circleOfsY * tmp118 + -circleOfsX * shellExpScaleMinV * shellPerturbAmplV * M_PI * tmp10 * tmp75 + -circleOfsX * shellExpScaleMinV * shellPerturbAmplU * M_PI * tmp10 * tmp72 + -2. * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodV * tmp11 * tmp81 * tmp34 + -4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp11 * tmp79 * tmp37 * tmp34 + 4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp34 * tmp115 + -2. * shellExpScaleMinV * tmp113 + 2. * shellExpScaleMaxV * tmp113 + -2. * circleOfsZ * tmp109 + -2. * circleOfsZ * tmp106 + 2. * circleOfsY * tmp103 + 2. * circleOfsY * tmp100 + circleOfsZ * shellExpScaleMaxV * tmp97 + circleOfsZ * shellExpScaleMaxV * tmp94 + circleOfsY * tmp91 + circleOfsY * tmp87 + circleOfsX * shellExpScaleMaxV * shellPerturbAmplV * M_PI * tmp17 * tmp22 + circleOfsX * shellExpScaleMaxV * shellPerturbAmplU * M_PI * tmp12 * tmp22 + -circleOfsZ * tmp83 + -circleOfsY * tmp82 + -circleOfsX * shellExpScaleMinV * tmp63 + -2. * shellPerturbPeriodV * tmp75 * tmp80 * tmp34 * tmp42 + -2. * shellPerturbAmplV * shellPerturbPeriodV * tmp34 * tmp81 + -2. * shellPeriodV * tmp37 * tmp61 * tmp34 * tmp42 + -2. * shellPeriodV * tmp37 * tmp60 * tmp34 * tmp39 + -4. * shellPeriodV * shellPerturbAmplV * tmp37 * tmp79 * tmp34 + 4. * shellPeriodV * shellPerturbAmplV * tmp34 * tmp79 + -4. * shellPeriodV * shellPerturbAmplU * tmp37 * tmp78 * tmp34 + 4. * shellPeriodV * shellPerturbAmplU * tmp34 * tmp78 + -2. * shellExpScaleMinV * tmp77 + -2. * shellExpScaleMinV * tmp74 + 2. * shellExpScaleMaxV * tmp77 + 2. * shellExpScaleMaxV * tmp74 + -2. * circleOfsZ * tmp71 + 2. * circleOfsY * tmp69 + circleOfsZ * tmp67 + circleOfsY * tmp65 + circleOfsX * shellExpScaleMaxV * tmp63 + -shellExpScaleMinV * tmp59 + -shellExpScaleMinV * tmp56 + 2. * shellPeriodV * tmp34 * tmp61 * tmp42 + 2. * shellPeriodV * tmp34 * tmp60 * tmp39 + shellExpScaleMaxV * tmp59 + shellExpScaleMaxV * tmp56 + -shellExpScaleMinV * tmp53 + -2. * shellPeriodV * tmp21 * tmp37 * tmp34 + 2. * shellPeriodV * tmp21 * tmp34 + shellExpScaleMaxV * tmp53) * tmp52;
normal.z = 2. * (2. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodU * tmp16 * tmp62 * tmp36 * tmp23 * tmp34 + -circleOfsZ * tmp151 + -circleOfsY * shellExpScaleMaxV * tmp154 + -circleOfsX * shellExpScaleMinV * shellPerturbAmplU * shellPerturbPeriodU * M_PI * tmp23 * tmp132 + 2. * shellPeriodV * shellPerturbPeriodU * tmp11 * tmp170 * tmp34 * tmp39 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp34 * tmp170 + 2. * circleOfsZ * tmp142 + 2. * circleOfsY * tmp147 + circleOfsZ * tmp131 + circleOfsY * shellExpScaleMinV * tmp136 + circleOfsX * shellExpScaleMaxV * shellPerturbAmplU * shellPerturbPeriodU * M_PI * tmp21 * tmp47 + -circleOfsZ * tmp121 + -circleOfsZ * tmp118 + -circleOfsY * shellExpScaleMaxV * tmp125 + -circleOfsY * shellExpScaleMaxV * tmp123 + -circleOfsX * shellExpScaleMaxV * shellPerturbAmplV * M_PI * tmp10 * tmp79 + -circleOfsX * shellExpScaleMaxV * shellPerturbAmplU * M_PI * tmp10 * tmp78 + 2. * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodV * tmp11 * tmp80 * tmp21 * tmp34 + -4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp16 * tmp72 * tmp37 * tmp34 + 4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp34 * tmp110 + 2. * shellExpScaleMinV * tmp168 + -2. * shellExpScaleMaxV * tmp168 + 2. * circleOfsZ * tmp103 + 2. * circleOfsZ * tmp100 + 2. * circleOfsY * tmp109 + 2. * circleOfsY * tmp106 + circleOfsZ * tmp91 + circleOfsZ * tmp87 + circleOfsY * shellExpScaleMinV * tmp97 + circleOfsY * shellExpScaleMinV * tmp94 + circleOfsX * shellExpScaleMinV * shellPerturbAmplV * M_PI * tmp16 * tmp160 + circleOfsX * shellExpScaleMinV * shellPerturbAmplU * M_PI * tmp11 * tmp160 + -circleOfsZ * tmp82 + -circleOfsY * tmp67 + -circleOfsX * shellExpScaleMaxV * tmp161 + 2. * shellPerturbPeriodV * tmp79 * tmp80 * tmp34 * tmp42 + 2. * shellPerturbAmplV * shellPerturbPeriodV * tmp21 * tmp80 * tmp34 + -2. * shellPeriodV * tmp37 * tmp57 * tmp34 * tmp42 + -2. * shellPeriodV * tmp37 * tmp54 * tmp34 * tmp39 + -4. * shellPeriodV * shellPerturbAmplV * tmp37 * tmp75 * tmp34 + 4. * shellPeriodV * shellPerturbAmplV * tmp34 * tmp75 + -4. * shellPeriodV * shellPerturbAmplU * tmp37 * tmp72 * tmp34 + 4. * shellPeriodV * shellPerturbAmplU * tmp34 * tmp72 + 2. * shellExpScaleMinV * tmp165 + 2. * shellExpScaleMinV * tmp163 + -2. * shellExpScaleMaxV * tmp165 + -2. * shellExpScaleMaxV * tmp163 + 2. * circleOfsZ * tmp69 + 2. * circleOfsY * tmp71 + circleOfsZ * tmp65 + circleOfsY * tmp83 + circleOfsX * shellExpScaleMinV * tmp161 + -shellExpScaleMaxV * tmp159 + -shellExpScaleMaxV * tmp157 + 2. * shellPeriodV * tmp34 * tmp57 * tmp42 + 2. * shellPeriodV * tmp34 * tmp54 * tmp39 + shellExpScaleMinV * tmp159 + shellExpScaleMinV * tmp157 + -shellExpScaleMaxV * tmp155 + -2. * shellPeriodV * tmp22 * tmp37 * tmp34 + 2. * shellPeriodV * tmp22 * tmp34 + shellExpScaleMinV * tmp155) * tmp52;