float tmp1 = shellExpScaleMinV * vtx.y;
float tmp2 = shellExpScaleMaxV * vtx.y;
float tmp3 = -tmp1;
float tmp4 = tmp2 + tmp3;
float tmp5 = shellExpScaleMinV + tmp4;
float tmp6 = M_PI * vtx.x;
float tmp7 = 2. * tmp6;
float tmp8 = shellPerturbPeriodU * tmp6;
float tmp9 = 2. * tmp8;
float tmp10 = cos(tmp7);
float tmp11 = cos(tmp9);
float tmp12 = tmp10 * tmp11;
float tmp13 = M_PI * vtx.y;
float tmp14 = shellPerturbPeriodV * tmp13;
float tmp15 = 2. * tmp14;
float tmp16 = cos(tmp15);
float tmp17 = tmp10 * tmp16;
float tmp18 = exp(tmp5);
float tmp19 = shellPeriodV * tmp13;
float tmp20 = 2. * tmp19;
float tmp21 = cos(tmp20);
float tmp22 = sin(tmp20);
float tmp23 = sin(tmp7);
float tmp24 = tmp11 * tmp23;
float tmp25 = tmp21 * tmp24;
float tmp26 = tmp16 * tmp23;
float tmp27 = tmp21 * tmp26;
float tmp28 = tmp21 * tmp23;
float tmp29 = tmp22 * tmp23;
float tmp30 = tmp11 * tmp29;
float tmp31 = tmp16 * tmp29;
float tmp32 = 2. * tmp5;
float tmp33 = M_PI * tmp10;
float tmp34 = M_PI * M_PI;
float tmp35 = tmp10 * tmp23;
float tmp36 = sin(tmp9);
float tmp37 = tmp10 * tmp10;
float tmp38 = tmp11 * tmp36;
float tmp39 = shellPerturbAmplU * shellPerturbAmplU;
float tmp40 = tmp11 * tmp11;
float tmp41 = tmp16 * tmp16;
float tmp42 = shellPerturbAmplV * shellPerturbAmplV;
float tmp43 = M_PI * tmp12;
float tmp44 = shellPerturbAmplU * tmp43;
float tmp45 = M_PI * tmp17;
float tmp46 = shellPerturbAmplV * tmp45;
float tmp47 = tmp23 * tmp36;
float tmp48 = M_PI * tmp47;
float tmp49 = shellPerturbPeriodU * tmp48;
float tmp50 = shellPerturbAmplU * tmp49;
float tmp51 = tmp16 * tmp36;
float tmp52 = exp(tmp32);
float tmp53 = M_PI * tmp22;
float tmp54 = tmp21 * tmp37;
float tmp55 = tmp22 * tmp40;
float tmp56 = tmp39 * tmp55;
float tmp57 = M_PI * tmp56;
float tmp58 = tmp22 * tmp41;
float tmp59 = tmp42 * tmp58;
float tmp60 = M_PI * tmp59;
float tmp61 = tmp21 * tmp40;
float tmp62 = tmp21 * tmp41;
float tmp63 = tmp10 * tmp22;
float tmp64 = M_PI * tmp63;
float tmp65 = M_PI * tmp29;
float tmp66 = shellExpScaleMaxV * tmp65;
float tmp67 = shellExpScaleMinV * tmp65;
float tmp68 = M_PI * tmp28;
float tmp69 = shellExpScaleMaxV * tmp68;
float tmp70 = shellExpScaleMinV * tmp68;
float tmp71 = tmp28 * tmp34;
float tmp72 = shellPeriodV * tmp71;
float tmp73 = tmp29 * tmp34;
float tmp74 = shellPeriodV * tmp73;
float tmp75 = tmp11 * tmp22;
float tmp76 = M_PI * tmp75;
float tmp77 = shellPerturbAmplU * tmp76;
float tmp78 = tmp16 * tmp22;
float tmp79 = M_PI * tmp78;
float tmp80 = shellPerturbAmplV * tmp79;
float tmp81 = sin(tmp15);
float tmp82 = tmp22 * tmp81;
float tmp83 = tmp11 * tmp21;
float tmp84 = tmp16 * tmp21;
float tmp85 = tmp22 * tmp24;
float tmp86 = M_PI * tmp85;
float tmp87 = shellPerturbAmplU * tmp86;
float tmp88 = shellExpScaleMaxV * tmp87;
float tmp89 = tmp22 * tmp26;
float tmp90 = M_PI * tmp89;
float tmp91 = shellPerturbAmplV * tmp90;
float tmp92 = shellExpScaleMaxV * tmp91;
float tmp93 = M_PI * tmp30;
float tmp94 = shellPerturbAmplU * tmp93;
float tmp95 = shellExpScaleMinV * tmp94;
float tmp96 = M_PI * tmp31;
float tmp97 = shellPerturbAmplV * tmp96;
float tmp98 = shellExpScaleMinV * tmp97;
float tmp99 = tmp23 * tmp83;
float tmp100 = M_PI * tmp99;
float tmp101 = shellPerturbAmplU * tmp100;
float tmp102 = tmp23 * tmp84;
float tmp103 = M_PI * tmp102;
float tmp104 = shellPerturbAmplV * tmp103;
float tmp105 = M_PI * tmp25;
float tmp106 = shellPerturbAmplU * tmp105;
float tmp107 = M_PI * tmp27;
float tmp108 = shellPerturbAmplV * tmp107;
float tmp109 = tmp25 * tmp34;
float tmp110 = shellPerturbAmplU * tmp109;
float tmp111 = shellPeriodV * tmp110;
float tmp112 = tmp27 * tmp34;
float tmp113 = shellPerturbAmplV * tmp112;
float tmp114 = shellPeriodV * tmp113;
float tmp115 = tmp30 * tmp34;
float tmp116 = shellPerturbAmplU * tmp115;
float tmp117 = shellPeriodV * tmp116;
float tmp118 = tmp31 * tmp34;
float tmp119 = shellPerturbAmplV * tmp118;
float tmp120 = shellPeriodV * tmp119;
float tmp121 = tmp11 * tmp78;
float tmp122 = M_PI * tmp121;
float tmp123 = shellPerturbAmplV * tmp122;
float tmp124 = shellPerturbAmplU * tmp123;
float tmp125 = tmp11 * tmp16;
float tmp126 = tmp21 * tmp125;
float tmp127 = tmp22 * tmp36;
float tmp128 = tmp10 * tmp127;
float tmp129 = M_PI * tmp128;
float tmp130 = shellPerturbPeriodU * tmp129;
float tmp131 = shellPerturbAmplU * tmp130;
float tmp132 = shellExpScaleMaxV * tmp131;
float tmp133 = tmp10 * tmp36;
float tmp134 = tmp22 * tmp133;
float tmp135 = M_PI * tmp134;
float tmp136 = shellPerturbPeriodU * tmp135;
float tmp137 = shellPerturbAmplU * tmp136;
float tmp138 = shellExpScaleMinV * tmp137;
float tmp139 = tmp21 * tmp36;
float tmp140 = tmp10 * tmp139;
float tmp141 = M_PI * tmp140;
float tmp142 = shellPerturbPeriodU * tmp141;
float tmp143 = shellPerturbAmplU * tmp142;
float tmp144 = tmp21 * tmp133;
float tmp145 = M_PI * tmp144;
float tmp146 = shellPerturbPeriodU * tmp145;
float tmp147 = shellPerturbAmplU * tmp146;
float tmp148 = tmp34 * tmp144;
float tmp149 = shellPerturbPeriodU * tmp148;
float tmp150 = shellPerturbAmplU * tmp149;
float tmp151 = shellPeriodV * tmp150;
float tmp152 = tmp34 * tmp134;
float tmp153 = shellPerturbPeriodU * tmp152;
float tmp154 = shellPerturbAmplU * tmp153;
float tmp155 = shellPeriodV * tmp154;
float tmp156 = M_PI * tmp21;
float tmp157 = tmp22 * tmp37;
float tmp158 = tmp39 * tmp61;
float tmp159 = M_PI * tmp158;
float tmp160 = tmp42 * tmp62;
float tmp161 = M_PI * tmp160;
float tmp162 = tmp10 * tmp21;
float tmp163 = M_PI * tmp162;
float tmp164 = M_PI * tmp83;
float tmp165 = shellPerturbAmplU * tmp164;
float tmp166 = M_PI * tmp84;
float tmp167 = shellPerturbAmplV * tmp166;
float tmp168 = M_PI * tmp126;
float tmp169 = shellPerturbAmplV * tmp168;
float tmp170 = shellPerturbAmplU * tmp169;
float tmp171 = tmp10 * tmp47;
float tmp172 = tmp22 * tmp171;
pos.x = (circleOfsX + shellPerturbAmplV * tmp17 + shellPerturbAmplU * tmp12 + tmp10) * tmp18;
pos.y = (circleOfsY * tmp21 + -circleOfsZ * tmp22 + shellPerturbAmplV * tmp27 + shellPerturbAmplU * tmp25 + tmp28) * tmp18;
pos.z = (circleOfsY * tmp22 + circleOfsZ * tmp21 + shellPerturbAmplV * tmp31 + shellPerturbAmplU * tmp30 + tmp29) * tmp18;
normal.x = 2. * (circleOfsZ * shellExpScaleMaxV * tmp33 + -circleOfsZ * shellExpScaleMinV * tmp33 + 2. * circleOfsY * shellPeriodV * tmp10 * tmp34 + 2. * shellPeriodV * tmp34 * tmp35 + -2. * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp34 * tmp36 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp34 * tmp36 * tmp37 + -2. * shellPeriodV * shellPerturbPeriodU * tmp34 * tmp38 * tmp39 + 2. * shellPeriodV * tmp34 * tmp35 * tmp39 * tmp40 + 2. * shellPeriodV * tmp34 * tmp35 * tmp41 * tmp42 + circleOfsZ * shellExpScaleMaxV * tmp44 + circleOfsZ * shellExpScaleMaxV * tmp46 + -circleOfsZ * shellExpScaleMinV * tmp44 + -circleOfsZ * shellExpScaleMinV * tmp46 + 2. * circleOfsY * shellPeriodV * shellPerturbAmplU * tmp12 * tmp34 + 2. * circleOfsY * shellPeriodV * shellPerturbAmplV * tmp17 * tmp34 + 2. * shellPeriodV * shellPerturbPeriodU * tmp34 * tmp37 * tmp38 * tmp39 + 4. * shellPeriodV * shellPerturbAmplU * tmp12 * tmp23 * tmp34 + 4. * shellPeriodV * shellPerturbAmplV * tmp17 * tmp23 * tmp34 + -circleOfsZ * shellExpScaleMaxV * tmp50 + circleOfsZ * shellExpScaleMinV * tmp50 + -2. * circleOfsY * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp34 * tmp47 + -2. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodU * tmp34 * tmp51 + 4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp10 * tmp16 * tmp24 * tmp34 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodU * tmp34 * tmp37 * tmp51) * tmp52;
normal.y = 2. * (shellExpScaleMaxV * tmp53 + -shellExpScaleMinV * tmp53 + 2. * shellPeriodV * tmp21 * tmp34 + -2. * shellPeriodV * tmp34 * tmp54 + shellExpScaleMaxV * tmp57 + shellExpScaleMaxV * tmp60 + -shellExpScaleMinV * tmp57 + -shellExpScaleMinV * tmp60 + 2. * shellPeriodV * tmp34 * tmp39 * tmp61 + 2. * shellPeriodV * tmp34 * tmp42 * tmp62 + circleOfsX * shellExpScaleMaxV * tmp64 + -circleOfsX * shellExpScaleMinV * tmp64 + circleOfsY * tmp66 + -circleOfsY * tmp67 + circleOfsZ * tmp69 + -circleOfsZ * tmp70 + 2. * circleOfsY * tmp72 + -2. * circleOfsZ * tmp74 + 2. * shellExpScaleMaxV * tmp77 + 2. * shellExpScaleMaxV * tmp80 + -2. * shellExpScaleMinV * tmp77 + -2. * shellExpScaleMinV * tmp80 + -2. * shellPeriodV * tmp34 * tmp39 * tmp40 * tmp54 + -2. * shellPeriodV * tmp34 * tmp41 * tmp42 * tmp54 + -2. * shellPerturbAmplV * shellPerturbPeriodV * tmp34 * tmp82 + -2. * shellPerturbPeriodV * tmp34 * tmp42 * tmp78 * tmp81 + 4. * shellPeriodV * shellPerturbAmplU * tmp34 * tmp83 + -4. * shellPeriodV * shellPerturbAmplU * tmp34 * tmp37 * tmp83 + 4. * shellPeriodV * shellPerturbAmplV * tmp34 * tmp84 + -4. * shellPeriodV * shellPerturbAmplV * tmp34 * tmp37 * tmp84 + circleOfsX * shellExpScaleMaxV * shellPerturbAmplU * M_PI * tmp12 * tmp22 + circleOfsX * shellExpScaleMaxV * shellPerturbAmplV * M_PI * tmp17 * tmp22 + -circleOfsX * shellExpScaleMinV * shellPerturbAmplU * M_PI * tmp10 * tmp75 + -circleOfsX * shellExpScaleMinV * shellPerturbAmplV * M_PI * tmp10 * tmp78 + circleOfsY * tmp88 + circleOfsY * tmp92 + -circleOfsY * tmp95 + -circleOfsY * tmp98 + circleOfsZ * shellExpScaleMaxV * tmp101 + circleOfsZ * shellExpScaleMaxV * tmp104 + -circleOfsZ * shellExpScaleMinV * tmp106 + -circleOfsZ * shellExpScaleMinV * tmp108 + 2. * circleOfsY * tmp111 + 2. * circleOfsY * tmp114 + -2. * circleOfsZ * tmp117 + -2. * circleOfsZ * tmp120 + 2. * shellExpScaleMaxV * tmp124 + -2. * shellExpScaleMinV * tmp124 + -2. * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodV * tmp11 * tmp34 * tmp82 + 4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp34 * tmp126 + -4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp11 * tmp34 * tmp37 * tmp84 + -circleOfsX * shellExpScaleMaxV * shellPerturbAmplU * shellPerturbPeriodU * M_PI * tmp22 * tmp47 + circleOfsX * shellExpScaleMinV * shellPerturbAmplU * shellPerturbPeriodU * M_PI * tmp23 * tmp127 + circleOfsY * tmp132 + -circleOfsY * tmp138 + circleOfsZ * shellExpScaleMaxV * tmp143 + -circleOfsZ * shellExpScaleMinV * tmp147 + 2. * circleOfsY * tmp151 + -2. * circleOfsZ * tmp155 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp23 * tmp34 * tmp140 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodU * tmp16 * tmp21 * tmp34 * tmp35 * tmp36 + 2. * shellPeriodV * shellPerturbPeriodU * tmp10 * tmp21 * tmp23 * tmp34 * tmp38 * tmp39) * tmp52;
normal.z = 2. * (-shellExpScaleMaxV * tmp156 + shellExpScaleMinV * tmp156 + 2. * shellPeriodV * tmp22 * tmp34 + -2. * shellPeriodV * tmp34 * tmp157 + -shellExpScaleMaxV * tmp159 + -shellExpScaleMaxV * tmp161 + shellExpScaleMinV * tmp159 + shellExpScaleMinV * tmp161 + 2. * shellPeriodV * tmp34 * tmp39 * tmp55 + 2. * shellPeriodV * tmp34 * tmp42 * tmp58 + -circleOfsX * shellExpScaleMaxV * tmp163 + circleOfsX * shellExpScaleMinV * tmp163 + -circleOfsY * tmp69 + circleOfsY * tmp70 + circleOfsZ * tmp66 + -circleOfsZ * tmp67 + 2. * circleOfsY * tmp74 + 2. * circleOfsZ * tmp72 + -2. * shellExpScaleMaxV * tmp165 + -2. * shellExpScaleMaxV * tmp167 + 2. * shellExpScaleMinV * tmp165 + 2. * shellExpScaleMinV * tmp167 + -2. * shellPeriodV * tmp34 * tmp39 * tmp40 * tmp157 + -2. * shellPeriodV * tmp34 * tmp41 * tmp42 * tmp157 + 2. * shellPerturbAmplV * shellPerturbPeriodV * tmp21 * tmp34 * tmp81 + 2. * shellPerturbPeriodV * tmp34 * tmp42 * tmp81 * tmp84 + 4. * shellPeriodV * shellPerturbAmplU * tmp34 * tmp75 + -4. * shellPeriodV * shellPerturbAmplU * tmp34 * tmp37 * tmp75 + 4. * shellPeriodV * shellPerturbAmplV * tmp34 * tmp78 + -4. * shellPeriodV * shellPerturbAmplV * tmp34 * tmp37 * tmp78 + -circleOfsX * shellExpScaleMaxV * shellPerturbAmplU * M_PI * tmp10 * tmp83 + -circleOfsX * shellExpScaleMaxV * shellPerturbAmplV * M_PI * tmp10 * tmp84 + circleOfsX * shellExpScaleMinV * shellPerturbAmplU * M_PI * tmp11 * tmp162 + circleOfsX * shellExpScaleMinV * shellPerturbAmplV * M_PI * tmp16 * tmp162 + -circleOfsY * shellExpScaleMaxV * tmp106 + -circleOfsY * shellExpScaleMaxV * tmp108 + circleOfsY * shellExpScaleMinV * tmp101 + circleOfsY * shellExpScaleMinV * tmp104 + circleOfsZ * tmp88 + circleOfsZ * tmp92 + -circleOfsZ * tmp95 + -circleOfsZ * tmp98 + 2. * circleOfsY * tmp117 + 2. * circleOfsY * tmp120 + 2. * circleOfsZ * tmp111 + 2. * circleOfsZ * tmp114 + -2. * shellExpScaleMaxV * tmp170 + 2. * shellExpScaleMinV * tmp170 + 2. * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodV * tmp11 * tmp21 * tmp34 * tmp81 + 4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp34 * tmp121 + -4. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * tmp16 * tmp34 * tmp37 * tmp75 + circleOfsX * shellExpScaleMaxV * shellPerturbAmplU * shellPerturbPeriodU * M_PI * tmp21 * tmp47 + -circleOfsX * shellExpScaleMinV * shellPerturbAmplU * shellPerturbPeriodU * M_PI * tmp23 * tmp139 + -circleOfsY * shellExpScaleMaxV * tmp147 + circleOfsY * shellExpScaleMinV * tmp143 + circleOfsZ * tmp132 + -circleOfsZ * tmp138 + 2. * circleOfsY * tmp155 + 2. * circleOfsZ * tmp151 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbPeriodU * tmp34 * tmp172 + 2. * shellPeriodV * shellPerturbAmplU * shellPerturbAmplV * shellPerturbPeriodU * tmp16 * tmp23 * tmp34 * tmp36 * tmp63 + 2. * shellPeriodV * shellPerturbPeriodU * tmp11 * tmp34 * tmp39 * tmp172) * tmp52;